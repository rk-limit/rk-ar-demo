<!doctype html>
<html lang="sk">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Menu ‚Äì izba</title>
  <style>
    body{font-family:system-ui,Arial;margin:0;background:#0b0d12;color:#fff}
    .wrap{max-width:720px;margin:0 auto;padding:24px}
    header{display:flex;align-items:center;gap:12px;margin-bottom:12px}
    .card{background:#121521;border:1px solid #1e2230;border-radius:14px;padding:16px 18px;margin:12px 0}
    .card a{display:block;text-decoration:none;color:#fff;padding:12px 0}
    .card a span{opacity:.7;font-size:14px;display:block}
    .muted{opacity:.75}
    code{background:#111827;border-radius:6px;padding:2px 6px}
  </style>
</head>
<body>
  <div class="wrap">
    <header><h1 id="title">Jednotka</h1></header>

    <div class="card">
      <a id="floorLink" target="_blank">üó∫Ô∏è Kompletn√Ω pl√°n poschodia <span>PDF</span></a>
      <a id="roomLink"  target="_blank">üìê Pl√°n tejto izby <span>PDF</span></a>
      <a id="arLink">üß© Vizualiz√°cia (AR ‚Äì HIRO) <span>Otvor√≠ kameru</span></a>
      <a id="todoLink">‚úÖ To-Do list <span>√ölohy pre t√∫to izbu</span></a>
      <a id="panelLink" target="_blank">‚ö° Pl√°n rozv√°dzaƒça <span>PDF</span></a>
    </div>

    <p class="muted">Otvoren√© pre: <code id="roomLabel"></code></p>
  </div>

  <script>
    const p = new URLSearchParams(location.search);
    const room = p.get('room');
    if(!room){
      document.getElementById('title').textContent = 'Ch√Ωba parameter ?room=...';
      throw new Error('Missing ?room');
    }
    document.getElementById('title').textContent = `Jednotka ${room}`;
    document.getElementById('roomLabel').textContent = room;

    // (A) Ak e≈°te nem√°≈° rooms.json, nastav√≠me aspo≈à To-Do a AR priamo:
    document.getElementById('todoLink').href = `todo/index.html?room=${encodeURIComponent(room)}`;
    document.getElementById('arLink').href   = `ar/index.html?room=${encodeURIComponent(room)}`;

    // (B) Ak m√°≈° rooms.json, odkomentuj blok ni≈æ≈°ie a vypln√≠ aj PDF linky:
    /*
    fetch('rooms.json').then(r=>r.json()).then(map=>{
      const cfg = map[room];
      if(!cfg){ alert('Izba nie je v rooms.json'); return; }
      document.getElementById('floorLink').href = cfg.floor_pdf;
      document.getElementById('roomLink').href  = cfg.room_pdf;
      document.getElementById('panelLink').href = cfg.panel_pdf;
      document.getElementById('todoLink').href  = `todo/index.html?room=${encodeURIComponent(room)}`;
      document.getElementById('arLink').href    = `ar/index.html?room=${encodeURIComponent(room)}`;
    }).catch(()=>{});
    */
  </script>
  <script>
  const p = new URLSearchParams(location.search);
  const room = p.get('room');
  if(!room){
    document.getElementById('title').textContent = 'Ch√Ωba parameter ?room=...';
    throw new Error('Missing ?room');
  }
  document.getElementById('title').textContent = `Jednotka ${room}`;
  document.getElementById('roomLabel').textContent = room;

  // naƒç√≠tanie rooms.json
  fetch('rooms.json')
    .then(r => r.json())
    .then(map => {
      const cfg = map[room];
      if(!cfg){ alert('Izba nie je v rooms.json'); return; }
      document.getElementById('floorLink').href = cfg.floor_pdf;
      document.getElementById('roomLink').href  = cfg.room_pdf;
      document.getElementById('panelLink').href = cfg.panel_pdf;
      document.getElementById('todoLink').href  = `todo/index.html?room=${encodeURIComponent(room)}`;
      document.getElementById('arLink').href    = `ar/index.html?room=${encodeURIComponent(room)}`;
    })
    .catch(e => alert('Ch√Ωba s√∫bor rooms.json alebo je zle nap√≠san√Ω.'));
</script>

</body>
</html>

